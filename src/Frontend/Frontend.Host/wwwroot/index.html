<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Gogon Store — Minimal UI</title>
    <style>
        body { font-family: system-ui, Arial, sans-serif; margin: 22px; }
        .wrap { max-width: 980px; }
        .row { display: flex; gap: 16px; flex-wrap: wrap; }
        .card { border: 1px solid #ddd; border-radius: 10px; padding: 14px; flex: 1; min-width: 320px; }
        label { display:block; margin-top: 10px; font-weight: 600; }
        input { width: 100%; padding: 8px; margin-top: 6px; box-sizing: border-box; }
        button { padding: 8px 12px; margin-top: 10px; cursor: pointer; }
        .kv { margin-top: 10px; }
        .kv div { margin: 4px 0; }
        .muted { color: #666; font-size: 12px; margin-top: 6px; }
        .ok { color: #0a7a0a; white-space: pre-wrap; margin-top: 8px; }
        .err { color: #b00020; white-space: pre-wrap; margin-top: 8px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border-bottom: 1px solid #eee; padding: 8px; text-align: left; }
        th { background: #fafafa; }
        .top { display: flex; gap: 10px; align-items: end; flex-wrap: wrap; }
        .top > div { flex: 1; min-width: 240px; }
        code { background: #f5f5f5; padding: 2px 6px; border-radius: 6px; }
    </style>
</head>
<body>
<div class="wrap">
    <h2>Gogon Store — минимальный фронтенд</h2>
    <div class="muted">
        UI ходит на <code>/api/...</code> (этот же порт), а Frontend.Host проксирует в Gateway.
    </div>

    <div class="card" style="margin-top:12px;">
        <div class="top">
            <div>
                <label for="login">Login (вводишь → аккаунт создаётся автоматически)</label>
                <input id="login" placeholder="например: Julia" autocomplete="off"/>
                <div class="muted">После ввода нажми Enter или кнопку ниже.</div>
            </div>
            <div style="flex:0; min-width: 220px;">
                <button id="btnApplyLogin" style="width:100%;">Войти / создать аккаунт</button>
                <button id="btnRefresh" style="width:100%;">Обновить данные</button>
            </div>
        </div>

        <div class="kv">
            <div><b>Текущий login:</b> <span id="curLogin">—</span></div>
            <div><b>UserId:</b> <span id="curUserId">—</span></div>
            <div><b>Balance:</b> <span id="curBalance">—</span></div>
        </div>

        <div id="mainOk" class="ok"></div>
        <div id="mainErr" class="err"></div>
    </div>

    <div class="row" style="margin-top:12px;">
        <div class="card">
            <h3 style="margin:0 0 6px 0;">Пополнение</h3>

            <label for="topupAmount">Сумма</label>
            <input id="topupAmount" type="number" min="1" step="1" placeholder="например: 150"/>

            <button id="btnTopup" style="width:100%;">Пополнить</button>

            <div id="topupOk" class="ok"></div>
            <div id="topupErr" class="err"></div>
        </div>

        <div class="card">
            <h3 style="margin:0 0 6px 0;">Создать заказ</h3>

            <label for="orderAmount">Сумма заказа</label>
            <input id="orderAmount" type="number" min="1" step="1" placeholder="например: 200"/>

            <label for="orderDesc">Описание</label>
            <input id="orderDesc" placeholder="например: lg"/>

            <button id="btnCreateOrder" style="width:100%;">Создать заказ</button>

            <div id="ordOk" class="ok"></div>
            <div id="ordErr" class="err"></div>
        </div>
    </div>

    <div class="card" style="margin-top:12px;">
        <div style="display:flex; justify-content: space-between; gap: 10px; flex-wrap: wrap;">
            <h3 style="margin:0;">Мои заказы</h3>
            <button id="btnLoadOrders">Обновить список заказов</button>
        </div>

        <table>
            <thead>
            <tr>
                <th>PublicId</th>
                <th>Amount</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody id="ordersBody">
            <tr><td colspan="3" class="muted">Пока пусто</td></tr>
            </tbody>
        </table>

        <div id="listErr" class="err"></div>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>
